(this["webpackJsonpweb-socket"]=this["webpackJsonpweb-socket"]||[]).push([[0],{12:function(e,t,r){e.exports={wrapper:"orderbook_wrapper__2NA3T"}},14:function(e,t,r){e.exports={table:"table_table__31tYB"}},15:function(e,t,r){e.exports={chart:"chart_chart__2q3rL"}},21:function(e,t,r){},27:function(e,t,r){},28:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r(0),c=r.n(n),o=r(6),s=r.n(o),i=(r(21),r(4)),l=r(3),u=r.n(l),b=function(e){var t=e.price,r=e.count,n=e.amount,o=e.total;return Object(a.jsx)(c.a.Fragment,{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{children:t})]})})},j=Object(n.memo)(b);j.propTypes={price:u.a.number,count:u.a.number,amount:u.a.number,total:u.a.number};var d=r(14),p=r.n(d),O=function(e){var t=e.data,r=void 0===t?[]:t;return Object(a.jsxs)("table",{className:p.a.table,children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Count"}),Object(a.jsx)("th",{children:"Amount"}),Object(a.jsx)("th",{children:"Total"}),Object(a.jsx)("th",{children:"Price"})]})}),Object(a.jsx)("tbody",{children:Array.isArray(r)&&r.length?r.slice(0,25).map((function(e,t){return Object(a.jsx)(j,{price:e.price,count:e.count,amount:e.amount,total:e.total},t)})):null})]})},h=r(15),f=r.n(h),m=function(e){var t=e.data,r=void 0===t?[]:t,n=e.fill,c=void 0===n?"green":n,o=e.transformX,s=void 0===o?-1:o,i=e.transformY,l=void 0===i?1:i,u={fill:c,transform:"scale(".concat(s,",").concat(l,")")};return Object(a.jsx)("svg",{className:f.a.chart,style:u,children:Array.isArray(r)&&r.length&&r.slice(0,25).map((function(e,t){return Object(a.jsx)("rect",{x:"1",y:17*t,width:"".concat(e.total,"%"),height:"17",fillOpacity:"0.2"},t)}))})},x=Object(n.memo)(m);x.propTypes={data:u.a.array,fill:u.a.string,transformX:u.a.string,transformY:u.a.string};var v=r(12),y=r.n(v),w=r(7),g=r(5),A=function(e){var t=[];return e.reduce((function(e,r){var a=r.price,n=r.count,c=r.amount,o=Math.abs(parseFloat(e.amount)+parseFloat(c)).toFixed(3),s={price:a,count:n,amount:c,total:o};return e.price&&t.push(Object(g.a)(Object(g.a)({},e),{},{total:e.amount})),t.push(s),{amount:o}})),t},N=Object(w.b)({name:"order",initialState:{tableData:[]},reducers:{setTableData:function(e,t){e.tableData=function(e){var t={},r={};return e.map((function(e){var a={price:e[0],count:e[1],amount:Math.abs(e[2]).toFixed(3)};return e[2]>0?t[a.price]=a:r[a.price]=a,a})),{buy:A(Object.values(t).reverse().slice(0,25)),sell:A(Object.values(r).reverse().slice(0,25)),buyObj:t,sellObj:r}}(t.payload)},updateTableData:function(e,t){e.tableData=function(e,t){var r=t.buyObj,a=t.sellObj,n=Object(g.a)({},r),c=Object(g.a)({},a),o={price:e[0],count:e[1],amount:Math.abs(e[2]).toFixed(3)};return e[2]>0?n[o.price]=o:c[o.price]=o,{buy:A(Object.values(n).reverse().slice(0,25)),sell:A(Object.values(c).reverse().slice(0,25)),buyObj:n,sellObj:c}}(t.payload,e.tableData)}}}),T=N.actions,k=T.setTableData,D=T.updateTableData,_=function(e){return e.order.tableData},S=N.reducer;function F(){var e=Object(i.c)(_),t=Object(i.b)();return Object(n.useEffect)((function(){var e=JSON.stringify({event:"subscribe",channel:"book",symbol:"tBTCUSD",len:25}),r=new WebSocket("wss://api-pub.bitfinex.com/ws/2");return r.onopen=function(){return r.send(e)},r.onmessage=function(e){var r=JSON.parse(e.data);Array.isArray(r)&&r[1].length>3?t(function(e){return function(t){t(k(e))}}(r[1])):Array.isArray(r)&&3===r[1].length&&t(function(e){return function(t){setTimeout((function(){t(D(e))}),500)}}(r[1]))},function(){r.OPEN&&!r.CONNECTING&&r.close()}}),[]),Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{className:y.a.wrapper,children:[Object(a.jsx)("span",{children:"Buy"}),Object(a.jsx)(O,{data:e.buy}),Object(a.jsx)(x,{data:e.buy})]}),Object(a.jsxs)("span",{className:y.a.wrapper,children:[Object(a.jsx)("span",{children:"Sell"}),Object(a.jsx)(O,{data:e.sell}),Object(a.jsx)(x,{data:e.sell,fill:"red",transformX:"1",transformY:"1"})]})]})}r(27);var B=function(){return Object(a.jsxs)("div",{className:"App App-header",children:[Object(a.jsx)("div",{children:"Orderbook"}),Object(a.jsx)(F,{})]})},C=Object(w.a)({reducer:{order:S}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(i.a,{store:C,children:Object(a.jsx)(B,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.e52e6e91.chunk.js.map